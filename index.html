<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <title> HELLO PWA  </title>
  <link rel="manifest" crossorigin="use-credentials" href="./manifest.json">
  
  <link rel="icon" type="image/png" sizes="192x192"  href="ico/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="16x16" href="ico/favicon-16x16.png"> 
  <link rel="icon" type="image/png" sizes="32x32" href="ico/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="ico/favicon-96x96.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  <style>
   .hidden {
       display: none !important;
   }
  </style>
</head>
<body>
  <h1>HELLO PWA</h1>
  
   <div id="installContainer" class="hidden" >
      <button id="butInstall" type="button">
        ì•±ìœ¼ë¡œ ì„¤ì¹˜
      </button>
    </div>
  
</body>

 <script src="js/main.js"></script>
 <script>
   
window.addEventListener('beforeinstallprompt', (event) => {
  console.info('ğŸ‘', 'beforeinstallprompt', event);
  // ë‚˜ì¤‘ì— ì´ë²¤íŠ¸ë¥¼ í™œì„±í™”í•˜ë ¤ê³  ë³´ê´€í•œë‹¤.
  window.deferredPrompt = event;
  // ì„¤ì¹˜ ë²„íŠ¼ì— ë‹´ê¸´ hidden í´ë˜ìŠ¤ë¥¼ ì œê±°í•œë‹¤. 
  divInstall.classList.toggle('hidden', false);
});

butInstall.addEventListener('click', async () => {
  console.info('ğŸ‘', 'butInstall-clicked');
  const promptEvent = window.deferredPrompt;
  if (!promptEvent) {
    // The deferred prompt isn't available.
    return;
  }
  // ì„¤ì¹˜ prompt í˜¸ì¶œ!
  promptEvent.prompt();
  // ê²°ê³¼ë¬¼ ë¡œê¹… ë° ì‚¬ìš©ì ì„ íƒ ì €ì¥
  const result = await promptEvent.userChoice;
  console.info('ğŸ‘', 'userChoice', result);

  // ì´ë²¤íŠ¸ ì´ˆê¸°í™”. prompt()ëŠ” í•œë²ˆë§Œ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.
  window.deferredPrompt = null;
  
  // ì„¤ì¹˜ ë²„íŠ¼ ë‹¤ì‹œ ìˆ¨ê¸°ê¸°
  divInstall.classList.toggle('hidden', true);

});

window.addEventListener('appinstalled', (event) => {
  console.info('ğŸ‘', 'appinstalled', event);
  
  // ì´ë²¤íŠ¸ ì´ˆê¸°í™” (ë¦¬ì†ŒìŠ¤ ê°€ë¹„ì§€ ì²˜ë¦¬) 
  window.deferredPrompt = null;
});
  </script>
</html>